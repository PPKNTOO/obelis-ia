<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Editor de Im√°genes Online - ObelisIA</title>
    <link rel="icon" href="../img/favicon.ico" type="image/ico" />
    <meta
      name="description"
      content="Editor de im√°genes online con herramientas de dibujo, borrador, transformaci√≥n, ajustes de color y funciones de deshacer/rehacer."
    />
    <meta
      name="keywords"
      content="editor de im√°genes, photoshop online, dibujar, borrar, rotar, voltear, brillo, contraste, saturaci√≥n, tonalidad, texto, formas, deshacer, rehacer, descargar imagen, ObelisIA"
    />
    <meta name="author" content="ObelisIA" />

    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />

    <style>
      /* General Body & Global Styles (from ia-img) */
      body {
        font-family: "Inter", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background-image: linear-gradient(to right, #1a202c, #2d3748);
        color: #e2e8f0; /* gris-200 */
        padding-top: 64px; /* Espacio para la barra de navegaci√≥n fija */
        margin: 0;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
      }

      /* Custom Tailwind Colors (from ia-img) */
      .bg-gradient-dark {
        background-image: linear-gradient(to right, #1a202c, #2d3748);
      }
      .text-cyan-500 {
        color: #06b6d4;
      }
      .bg-cyan-600 {
        background-color: #0891b2;
      }
      .hover\:bg-cyan-700:hover {
        background-color: #0e7490;
      }
      .focus\:ring-cyan-300:focus {
        --tw-ring-color: #67e8f9;
      }

      /* --- Navbar Styles (from ia-img, adjusted) --- */
      #main-navbar {
        z-index: 1000; /* Asegura que la navbar principal est√© siempre en la parte superior */
      }
      .navbar-inner-content {
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 100%;
      }
      .nav-item {
        position: relative; /* CR√çTICO para que los submen√∫s se posicionen correctamente */
        padding: 0.5rem 0.75rem;
        transition: all 0.2s ease-in-out;
        border-radius: 0.375rem;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        white-space: nowrap; /* Evita que los √≠tems se rompan en varias l√≠neas */
      }
      .nav-item:hover {
        background-color: #2d3748;
        color: #67e8f9;
      }
      .nav-item.active-link {
        color: #06b6d4;
        border-bottom: 2px solid #06b6d4;
        padding-bottom: calc(0.5rem - 2px);
        background-color: rgba(6, 182, 212, 0.1);
      }
      .nav-item .nav-icon {
        font-size: 1rem;
        color: #cbd5e1;
        transition: color 0.2s ease;
      }
      .nav-item:hover .nav-icon {
        color: #67e8f9;
      }
      .nav-item.active-link .nav-icon {
        color: #06b6d4;
      }

      /* Submen√∫ */
      .submenu {
        position: absolute;
        top: 100%; /* Posiciona justo debajo del padre */
        left: 0;
        background-color: #1a202c;
        border: 1px solid #4a5568;
        border-radius: 0.5rem;
        min-width: 180px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
        z-index: 1001; /* Asegura que est√© por encima de la navbar y el contenido */
        opacity: 0;
        visibility: hidden;
        transform: translateY(10px);
        transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s ease;
        padding: 0.5rem 0;
      }
      .nav-item.group:hover .submenu {
        /* Se muestra al hacer hover sobre el padre */
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }
      .submenu-item {
        display: block;
        padding: 0.75rem 1rem;
        color: #e2e8f0;
        text-align: left;
        transition: background-color 0.2s ease, color 0.2s ease;
        font-weight: 400;
        white-space: nowrap;
      }
      .submenu-item:hover {
        background-color: #2d3748;
        color: #67e8f9;
      }
      .submenu-item.active-link {
        background-color: rgba(6, 182, 212, 0.1);
        color: #06b6d4;
        font-weight: 500;
      }
      .nav-item .arrow-icon {
        margin-left: 0.5rem;
        transition: transform 0.2s ease;
      }
      .nav-item:hover .arrow-icon {
        transform: rotate(90deg);
      }

      /* Navbar Responsive (Hamburguesa) */
      @media (max-width: 768px) {
        .navbar-inner-content .flex-wrap {
          display: none; /* Oculto por defecto en m√≥vil */
          flex-direction: column;
          position: absolute;
          top: 64px; /* Debajo de la navbar fija */
          left: 0;
          width: 100%;
          background-color: #1a202c;
          box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
          padding-bottom: 1rem;
          overflow-y: auto;
          max-height: calc(100vh - 64px);
          transform: translateY(-100%);
          transition: transform 0.3s ease-out;
          z-index: 999;
        }
        .navbar-inner-content .flex-wrap.active {
          display: flex;
          transform: translateY(0);
        }
        #menuToggle {
          display: block;
          background: none;
          border: none;
          color: white;
          font-size: 1.5rem;
          cursor: pointer;
          order: 2;
        }
        .navbar-inner-content {
          justify-content: space-between;
          padding-left: 1rem;
          padding-right: 1rem;
        }
        .navbar-inner-content a.text-2xl {
          order: 1;
        }
        .nav-item {
          width: 100%;
          justify-content: center;
          padding: 0.75rem 1rem;
          border-bottom: 1px solid rgba(74, 85, 104, 0.3);
        }
        .nav-item:last-child {
          border-bottom: none;
        }
        .nav-item.group {
          flex-direction: column;
          align-items: flex-start;
          padding: 0;
        }
        .nav-item.group span {
          width: 100%;
          text-align: center;
          padding: 0.75rem 1rem;
          display: flex;
          justify-content: center;
          align-items: center;
        }
        .nav-item .submenu {
          position: static; /* En m√≥vil, el submen√∫ se convierte en parte del flujo normal */
          width: 100%;
          border: none;
          box-shadow: none;
          border-radius: 0;
          transform: translateY(0);
          opacity: 1;
          visibility: visible; /* Siempre visible cuando el men√∫ m√≥vil est√° activo */
          padding: 0;
          background-color: #1a202c;
        }
        .submenu-item {
          padding-left: 2.5rem;
          text-align: center;
          padding-top: 0.5rem;
          padding-bottom: 0.5rem;
        }
        .nav-item:hover .arrow-icon {
          transform: rotate(0deg);
        }
      }

      /* --- Editor Specific Styles --- */
      .body {
        /* Re-applying some base styles if they were overridden by Tailwind defaults */
        padding-top: 64px; /* To prevent content being hidden under fixed navbar */
      }
      .editor-main-layout {
        display: flex;
        flex-direction: column; /* Default to column for small screens */
        width: 100%;
        max-width: 1200px; /* Aligns with navbar max-width */
        margin-top: 1rem; /* Space below the menu bar */
        gap: 1rem; /* Space between sidebars and canvas */
        padding: 0 1rem; /* Horizontal padding */
        flex-grow: 1; /* Allows it to take up available vertical space */
      }

      @media (min-width: 1024px) {
        /* On large screens (lg breakpoint) */
        .editor-main-layout {
          flex-direction: row; /* Layout becomes row (side-by-side) */
          align-items: flex-start; /* Align items to the top */
          justify-content: center; /* Center content if there's extra space */
        }
      }

      .menu-bar {
        background-color: #2d3748;
        border: 1px solid #4a5568;
        border-radius: 0.5rem;
        padding: 0.5rem;
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        width: 100%;
        max-width: 1200px;
        margin-top: 1rem; /* Adjust this to push it down below the navbar */
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        position: relative;
        z-index: 900; /* Below navbar, above editor content */
      }

      .menu-item {
        position: relative;
      }

      .menu-item-button {
        background-color: transparent;
        color: white;
        padding: 0.5rem 0.75rem;
        border: none;
        border-radius: 0.375rem;
        font-weight: 500;
        transition: background-color 0.2s ease, color 0.2s ease;
        cursor: pointer;
      }

      .menu-item-button:hover,
      .menu-item-button.active {
        background-color: #4a5568;
        color: #67e8f9;
      }

      .menu-dropdown {
        /* This is for the editor's menu bar dropdowns */
        position: absolute;
        top: 100%;
        left: 0;
        background-color: #1a202c;
        border: 1px solid #4a5568;
        border-radius: 0.5rem;
        min-width: 180px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
        z-index: 1002; /* Higher than navbar, higher than other content */
        opacity: 0;
        visibility: hidden;
        transform: translateY(10px);
        transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s ease;
        padding: 0.5rem 0;
        pointer-events: none; /* Initially ignore mouse events */
      }

      .menu-dropdown.show {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
        pointer-events: auto; /* Enable mouse events when shown */
      }

      .menu-dropdown-item {
        display: block;
        width: 100%;
        padding: 0.75rem 1rem;
        color: #e2e8f0;
        text-align: left;
        background-color: transparent;
        border: none;
        cursor: pointer;
        transition: background-color 0.2s ease, color 0.2s ease;
      }

      .menu-dropdown-item:hover {
        background-color: #2d3748;
        color: #67e8f9;
      }
      .menu-dropdown-item.header {
        font-weight: bold;
        color: #06b6d4;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
        cursor: default;
      }
      .menu-dropdown-item.header:hover {
        background-color: transparent;
        color: #06b6d4;
      }
      .menu-dropdown-item.separator {
        border-top: 1px solid #4a5568;
        margin: 0.5rem 0;
        height: 0;
        padding: 0;
      }

      /* Sidebars del Editor */
      .editor-sidebar,
      .editor-right-sidebar {
        background-color: #2d3748;
        border: 1px solid #4a5568;
        border-radius: 0.75rem;
        padding: 1rem;
        min-width: 250px;
        max-width: 100%; /* Full width on mobile */
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      @media (min-width: 1024px) {
        /* lg */
        .editor-sidebar,
        .editor-right-sidebar {
          max-width: 280px; /* Fixed width on desktop */
          min-height: 700px; /* Ensure minimum height */
        }
      }
      /* Canvas Area */
      .editor-canvas-area {
        flex-grow: 1; /* Takes remaining horizontal space */
        display: flex;
        flex-direction: column;
        align-items: center;
        background-color: #2d3748;
        border: 1px solid #4a5568;
        border-radius: 0.75rem;
        padding: 1rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        min-height: 500px; /* Minimum height for the canvas area */
        justify-content: center; /* Center content vertically */
      }

      .canvas-container {
        position: relative;
        background-color: #1a202c;
        border: 1px solid #4a5568;
        border-radius: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        width: 100%;
        height: 400px; /* Default height, will be adjusted by image */
        max-width: 100%;
        margin-top: 1rem;
      }

      #imageCanvas {
        max-width: 100%;
        max-height: 100%;
        display: block;
        cursor: crosshair;
      }
      #placeholderText {
        position: absolute;
        color: #a0aec0;
        font-size: 1.2rem;
        text-align: center;
      }

      #cropOverlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
      }

      /* Tool Group Styles */
      .sidebar-tool-group {
        background-color: #1a202c;
        border: 1px solid #4a5568;
        border-radius: 0.5rem;
        padding: 1rem;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }
      .sidebar-tool-group-label {
        font-weight: bold;
        color: #06b6d4;
        text-align: center;
        margin-bottom: 0.5rem;
        display: block;
      }
      .sidebar-tool-group-row {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      .sidebar-tool-group-row.justify-between {
        justify-content: space-between;
      }
      .tool-group-label {
        color: #cbd5e1;
        font-size: 0.9rem;
        flex-shrink: 0;
      }

      /* Inputs espec√≠ficos */
      .editor-sidebar input[type="range"] {
        width: 100%;
        -webkit-appearance: none;
        height: 8px;
        background: #4a5568;
        border-radius: 5px;
        outline: none;
        transition: background 0.2s ease;
      }
      .editor-sidebar input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: #06b6d4;
        cursor: pointer;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
      }
      .editor-sidebar input[type="range"]::-moz-range-thumb {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: #06b6d4;
        cursor: pointer;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
      }

      .editor-sidebar input[type="color"] {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        border: none;
        width: 36px;
        height: 36px;
        background: transparent;
        cursor: pointer;
        border-radius: 0.375rem;
        overflow: hidden;
      }
      .editor-sidebar input[type="color"]::-webkit-color-swatch-wrapper {
        padding: 0;
      }
      .editor-sidebar input[type="color"]::-webkit-color-swatch {
        border: 2px solid #4a5568;
        border-radius: 0.375rem;
      }
      .editor-sidebar input[type="color"]::-moz-color-swatch {
        border: 2px solid #4a5568;
        border-radius: 0.375rem;
      }

      .editor-sidebar input[type="text"],
      .editor-sidebar input[type="number"],
      .editor-sidebar select {
        background-color: #2d3748;
        border: 1px solid #4a5568;
        color: white;
        padding: 0.5rem 0.75rem;
        border-radius: 0.375rem;
        font-size: 0.9rem;
        outline: none;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
      }
      .editor-sidebar input[type="text"]:focus,
      .editor-sidebar input[type="number"]:focus,
      .editor-sidebar select:focus {
        border-color: #06b6d4;
        box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.5);
      }

      .tool-btn {
        background-color: #0891b2;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        font-weight: 600;
        transition: background-color 0.2s ease, transform 0.2s ease;
        cursor: pointer;
        border: none;
        text-align: center;
        font-size: 0.95rem;
      }
      .tool-btn:hover {
        background-color: #0e7490;
        transform: translateY(-1px);
      }
      .tool-btn:active {
        transform: translateY(0);
      }
      .tool-btn.active-tool {
        background-color: #0e7490;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.4);
      } /* Usar 'active-tool' */
      .tool-btn.disabled-btn {
        opacity: 0.5;
        cursor: not-allowed;
        background-color: #4a5568;
      }
      .tool-btn-sm {
        padding: 0.4rem 0.8rem;
        font-size: 0.85rem;
      }

      /* Ads (from ia-img) */
      .ad-banner {
        background-color: #1f2937;
        border: 1px dashed #4b5563;
        color: #d1d5db;
        padding: 1rem;
        text-align: center;
        border-radius: 0.5rem;
        font-style: italic;
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
        font-size: 0.9rem;
        width: 100%;
        max-width: 960px;
      }
      .ad-banner-top {
        min-height: 100px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem;
      }
      .ad-banner-bottom {
        min-height: 60px;
        margin-top: 1.5rem;
      }
    </style>
  </head>
  <body class="min-h-screen flex flex-col items-center p-4 bg-gradient-dark">
    <nav
      id="main-navbar"
      class="bg-gray-800 text-white p-4 w-full fixed top-0 left-0 shadow-lg z-1000 h-16"
    >
      <div class="navbar-inner-content">
        <a
          href="../index.html"
          class="text-2xl font-bold hover:text-cyan-500 transition-colors duration-200"
          >Obelis <span style="color: #0891b2">IA</span></a
        >
        <button id="menuToggle" class="md:hidden">
          <i class="fas fa-bars"></i>
        </button>
        <div class="flex-wrap flex items-center md:flex">
          <a href="../index.html" class="nav-item">
            <i class="fas fa-home nav-icon"></i> Inicio
          </a>

          <div class="nav-item group">
            <span class="cursor-pointer">
              <i class="fas fa-robot nav-icon"></i> Herramientas IA
              <i class="fas fa-chevron-right arrow-icon"></i>
            </span>
            <div class="submenu">
              <a href="../ia-img/index.html" class="submenu-item"
                >Generador de Im√°genes IA</a
              >
              <a href="../ia-text/index.html" class="submenu-item"
                >Generador de Texto IA</a
              >
              <a href="../ia-video/index.html" class="submenu-item"
                >Generador de Videos IA</a
              >
            </div>
          </div>

          <div class="nav-item group">
            <span class="cursor-pointer">
              <i class="fas fa-paint-brush nav-icon"></i> Edici√≥n de Imagen
              <i class="fas fa-chevron-right arrow-icon"></i>
            </span>
            <div class="submenu">
              <a
                href="./index.html"
                class="submenu-item active-link"
                aria-current="page"
                >Editor de Im√°genes</a
              >
              <a href="../convert-img/index.html" class="submenu-item"
                >Convertir Im√°genes</a
              >
            </div>
          </div>

          <div class="nav-item group">
            <span class="cursor-pointer">
              <i class="fas fa-tools nav-icon"></i> M√°s Herramientas
              <i class="fas fa-chevron-right arrow-icon"></i>
            </span>
            <div class="submenu">
              <a href="#" class="submenu-item opacity-50 cursor-not-allowed"
                >Herramienta X (Pr√≥ximamente)</a
              >
              <a href="#" class="submenu-item opacity-50 cursor-not-allowed"
                >Herramienta Y (Pr√≥ximamente)</a
              >
            </div>
          </div>
        </div>
      </div>
    </nav>

    <div class="menu-bar">
      <div class="menu-item">
        <button class="menu-item-button" id="fileMenuBtn">Archivo</button>
        <div class="menu-dropdown" id="fileMenuDropdown">
          <label
            for="imageUpload"
            class="menu-dropdown-item"
            id="fileUploadLabel"
          >
            Cargar Imagen
          </label>
          <input type="file" id="imageUpload" accept="image/*" class="hidden" />
          <button class="menu-dropdown-item" id="menuDownloadImageBtn">
            Descargar Imagen
          </button>
          <div class="menu-dropdown-item separator"></div>
          <button class="menu-dropdown-item" id="menuResetImageBtn">
            Reiniciar Imagen
          </button>
          <button class="menu-dropdown-item" id="menuClearCanvasBtn">
            Limpiar Canvas
          </button>
        </div>
      </div>

      <div class="menu-item">
        <button class="menu-item-button" id="editMenuBtn">Edici√≥n</button>
        <div class="menu-dropdown" id="editMenuDropdown">
          <button class="menu-dropdown-item" id="menuUndoBtn">Deshacer</button>
          <button class="menu-dropdown-item" id="menuRedoBtn">Rehacer</button>
        </div>
      </div>

      <div class="menu-item">
        <button class="menu-item-button" id="imageMenuBtn">Imagen</button>
        <div class="menu-dropdown" id="imageMenuDropdown">
          <span class="menu-dropdown-item header">Transformar</span>
          <button class="menu-dropdown-item" id="menuRotateLeftBtn">
            Rotar Izq. (90¬∞)
          </button>
          <button class="menu-dropdown-item" id="menuRotateRightBtn">
            Rotar Der. (90¬∞)
          </button>
          <button class="menu-dropdown-item" id="menuFlipHorizontalBtn">
            Voltear Horizontal
          </button>
          <button class="menu-dropdown-item" id="menuFlipVerticalBtn">
            Voltear Vertical
          </button>
          <button class="menu-dropdown-item" id="menuResizeBtn">
            Cambiar Tama√±o...
          </button>
          <button class="menu-dropdown-item" id="menuCropTool">Recortar</button>
          <button class="menu-dropdown-item" id="menuDistortTool">
            Distorsionar (Placeholder)
          </button>
          <span class="menu-dropdown-item header">Ajustes</span>
          <button class="menu-dropdown-item" id="menuBrightnessContrastBtn">
            Brillo/Contraste...
          </button>
          <button class="menu-dropdown-item" id="menuSaturationHueBtn">
            Saturaci√≥n/Tonalidad...
          </button>
          <button class="menu-dropdown-item" id="menuExposureGammaBtn">
            Exposici√≥n/Gamma...
          </button>
          <button class="menu-dropdown-item" id="menuLevelsBtn">
            Niveles (Placeholder)
          </button>
          <button class="menu-dropdown-item" id="menuColorBalanceBtn">
            Balance de Color (Placeholder)
          </button>
          <button class="menu-dropdown-item" id="menuVibranceBtn">
            Vibrance (Placeholder)
          </button>
        </div>
      </div>

      <div class="menu-item">
        <button class="menu-item-button" id="filtersMenuBtn">Filtros</button>
        <div class="menu-dropdown" id="filtersMenuDropdown">
          <button class="menu-dropdown-item" id="menuGrayscaleBtn">
            Escala de Grises
          </button>
          <button class="menu-dropdown-item" id="menuSepiaBtn">Sepia</button>
          <button class="menu-dropdown-item" id="menuInvertBtn">
            Invertir Colores
          </button>
          <div class="menu-dropdown-item separator"></div>
          <button class="menu-dropdown-item" id="menuBlurBtn">
            Desenfoque
          </button>
          <button class="menu-dropdown-item" id="menuSharpenBtn">
            Enfocar
          </button>
          <button class="menu-dropdown-item" id="menuPixelateBtn">
            Pixelar
          </button>
          <div class="menu-dropdown-item separator"></div>
          <button class="menu-dropdown-item" id="menuVignetteBtn">
            Vi√±eta
          </button>
          <button class="menu-dropdown-item" id="menuNoiseBtn">Ruido</button>
          <button class="menu-dropdown-item" id="menuEmbossBtn">Relieve</button>
          <div class="menu-dropdown-item separator"></div>
          <button class="menu-dropdown-item" id="menuWarmFilterBtn">
            Filtro C√°lido
          </button>
          <button class="menu-dropdown-item" id="menuCoolFilterBtn">
            Filtro Fr√≠o
          </button>
          <button class="menu-dropdown-item" id="menuPosterizeBtn">
            Posterizar (Placeholder)
          </button>
          <button class="menu-dropdown-item" id="menuDuotoneBtn">
            Duotono (Placeholder)
          </button>
          <button class="menu-dropdown-item" id="menuBwControlBtn">
            Control B/N (Placeholder)
          </button>
        </div>
      </div>

      <div class="menu-item">
        <button class="menu-item-button" id="toolsMenuBtn">Herramientas</button>
        <div class="menu-dropdown" id="toolsMenuDropdown">
          <button class="menu-dropdown-item" id="brushTool">Pincel</button>
          <button class="menu-dropdown-item" id="eraserTool">Borrador</button>
          <button class="menu-dropdown-item" id="lineTool">L√≠nea</button>
          <button class="menu-dropdown-item" id="textTool">Texto</button>
          <button class="menu-dropdown-item" id="rectangleTool">
            Rect√°ngulo
          </button>
          <button class="menu-dropdown-item" id="circleTool">C√≠rculo</button>
          <button class="menu-dropdown-item" id="triangleTool">
            Tri√°ngulo
          </button>
          <div class="menu-dropdown-item separator"></div>
          <button class="menu-dropdown-item" id="eyedropperTool">
            Cuentagotas
          </button>
          <button class="menu-dropdown-item" id="fillTool">
            Relleno (Placeholder)
          </button>
          <div class="menu-dropdown-item separator"></div>
          <span class="menu-dropdown-item header">Selecci√≥n</span>
          <button class="menu-dropdown-item" id="rectSelectTool">
            Rectangular (Placeholder)
          </button>
          <button class="menu-dropdown-item" id="lassoTool">
            Lazo (Placeholder)
          </button>
          <button class="menu-dropdown-item" id="magicWandTool">
            Varita M√°gica (Placeholder)
          </button>
          <span class="menu-dropdown-item header">Capas</span>
          <button class="menu-dropdown-item" id="flattenLayersBtn">
            Aplanar (Placeholder)
          </button>
          <button class="menu-dropdown-item" id="mergeVisibleBtn">
            Fusionar Visible (Placeholder)
          </button>
        </div>
      </div>
    </div>

    <div class="editor-main-layout">
      <div class="editor-sidebar">
        <span class="text-xl font-bold text-white mb-2 text-center"
          >Propiedades</span
        >

        <div class="sidebar-tool-group">
          <span class="sidebar-tool-group-label"
            >Herramienta Activa:
            <span id="activeToolDisplay">Pincel</span></span
          >
          <div class="sidebar-tool-group-row justify-between">
            <span class="tool-group-label">Color:</span>
            <input type="color" id="colorPicker" value="#06b6d4" />
          </div>
          <div class="sidebar-tool-group-row justify-between">
            <span class="tool-group-label">Tama√±o:</span>
            <input
              type="range"
              id="lineWidthRange"
              min="1"
              max="50"
              value="5"
            />
            <span id="lineWidthValue" class="text-gray-300 text-sm">5px</span>
          </div>
          <div class="sidebar-tool-group-row justify-between">
            <span class="tool-group-label">Dureza (Pincel):</span>
            <input
              type="range"
              id="brushHardnessRange"
              min="0"
              max="100"
              value="50"
            />
            <span id="brushHardnessValue" class="text-gray-300 text-sm"
              >50%</span
            >
          </div>
          <div class="sidebar-tool-group-row justify-between">
            <span class="tool-group-label">Opacidad:</span>
            <input
              type="range"
              id="globalOpacityRange"
              min="0"
              max="100"
              value="100"
            />
            <span id="globalOpacityValue" class="text-gray-300 text-sm"
              >100%</span
            >
          </div>

          <div
            id="textOptions"
            class="sidebar-tool-group-row hidden w-full justify-center flex-col items-center"
          >
            <input
              type="text"
              id="textInput"
              placeholder="Escribe tu texto aqu√≠"
              class="my-2"
            />
            <div class="sidebar-tool-group-row justify-between w-full">
              <span class="tool-group-label">Fuente:</span>
              <select id="fontFamilySelect" class="flex-grow max-w-[120px]">
                <option value="Inter, sans-serif">Inter</option>
                <option value="Arial, sans-serif">Arial</option>
                <option value="Verdana, sans-serif">Verdana</option>
                <option value="Times New Roman, serif">Times New Roman</option>
                <option value="Courier New, monospace">Courier New</option>
              </select>
            </div>
            <div class="sidebar-tool-group-row justify-between w-full">
              <span class="tool-group-label">Tama√±o:</span>
              <input
                type="range"
                id="fontSizeRange"
                min="10"
                max="100"
                value="30"
                class="flex-grow"
              />
              <span id="fontSizeValue" class="text-gray-300 text-sm ml-2"
                >30px</span
              >
            </div>
            <div class="sidebar-tool-group-row justify-center mt-2">
              <button id="boldTextBtn" class="tool-btn tool-btn-sm">
                ùêÅ Negrita
              </button>
              <button id="italicTextBtn" class="tool-btn tool-btn-sm">
                ùêº Cursiva
              </button>
            </div>
          </div>
          <div
            id="resizeOptions"
            class="sidebar-tool-group-row hidden w-full justify-center flex-col items-center"
          >
            <div class="sidebar-tool-group-row justify-between w-full mt-2">
              <span class="tool-group-label">Ancho:</span>
              <input
                type="number"
                id="resizeWidth"
                placeholder="Ancho"
                class="flex-grow max-w-[80px]"
              />
              <span class="tool-group-label ml-2">Alto:</span>
              <input
                type="number"
                id="resizeHeight"
                placeholder="Alto"
                class="flex-grow max-w-[80px]"
              />
            </div>
            <button id="resizeBtn" class="tool-btn w-full mt-2">
              Aplicar Cambio de Tama√±o
            </button>
          </div>
          <div
            id="cropOptions"
            class="sidebar-tool-group-row hidden w-full justify-center flex-col items-center"
          >
            <p class="text-gray-400 text-sm mb-2 text-center">
              Arrastra en el canvas para seleccionar el √°rea de recorte.
            </p>
            <div class="sidebar-tool-group-row justify-center mt-2">
              <button id="applyCropBtn" class="tool-btn tool-btn-sm mr-2">
                Aplicar Recorte
              </button>
              <button id="cancelCropBtn" class="tool-btn tool-btn-sm">
                Cancelar Recorte
              </button>
            </div>
          </div>
        </div>

        <div class="sidebar-tool-group">
          <span class="sidebar-tool-group-label">Ajustes de Imagen</span>
          <div class="sidebar-tool-group-row justify-between">
            <span class="tool-group-label">Brillo:</span>
            <input
              type="range"
              id="brightnessRange"
              min="-100"
              max="100"
              value="0"
            />
            <span
              id="brightnessValue"
              class="text-gray-300 text-sm w-8 text-right"
              >0</span
            >
          </div>
          <div class="sidebar-tool-group-row justify-between">
            <span class="tool-group-label">Contraste:</span>
            <input
              type="range"
              id="contrastRange"
              min="-100"
              max="100"
              value="0"
            />
            <span
              id="contrastValue"
              class="text-gray-300 text-sm w-8 text-right"
              >0</span
            >
          </div>
          <div class="sidebar-tool-group-row justify-between">
            <span class="tool-group-label">Saturaci√≥n:</span>
            <input
              type="range"
              id="saturationRange"
              min="0"
              max="200"
              value="100"
            />
            <span
              id="saturationValue"
              class="text-gray-300 text-sm w-8 text-right"
              >100%</span
            >
          </div>
          <div class="sidebar-tool-group-row justify-between">
            <span class="tool-group-label">Tonalidad:</span>
            <input
              type="range"
              id="hueRotateRange"
              min="0"
              max="360"
              value="0"
            />
            <span
              id="hueRotateValue"
              class="text-gray-300 text-sm w-8 text-right"
              >0¬∞</span
            >
          </div>
          <div class="sidebar-tool-group-row justify-between">
            <span class="tool-group-label">Exposici√≥n:</span>
            <input
              type="range"
              id="exposureRange"
              min="-100"
              max="100"
              value="0"
            />
            <span
              id="exposureValue"
              class="text-gray-300 text-sm w-8 text-right"
              >0</span
            >
          </div>
          <div class="sidebar-tool-group-row justify-between">
            <span class="tool-group-label">Gamma:</span>
            <input type="range" id="gammaRange" min="1" max="300" value="100" />
            <span id="gammaValue" class="text-gray-300 text-sm w-8 text-right"
              >1.0</span
            >
          </div>
          <div class="sidebar-tool-group-row justify-between">
            <span class="tool-group-label">Desenfoque:</span>
            <input
              type="range"
              id="blurIntensityRange"
              min="0"
              max="5"
              value="0"
              step="0.1"
            />
            <span
              id="blurIntensityValue"
              class="text-gray-300 text-sm w-8 text-right"
              >0</span
            >
          </div>
          <div class="sidebar-tool-group-row justify-between">
            <span class="tool-group-label">Enfoque:</span>
            <input
              type="range"
              id="sharpenIntensityRange"
              min="0"
              max="5"
              value="0"
              step="0.1"
            />
            <span
              id="sharpenIntensityValue"
              class="text-gray-300 text-sm w-8 text-right"
              >0</span
            >
          </div>
        </div>
      </div>

      <div class="editor-canvas-area">
        <span class="text-xl font-bold text-white mb-2">Canvas de Edici√≥n</span>
        <div class="canvas-container">
          <canvas id="imageCanvas"></canvas>
          <span id="placeholderText"
            >Carga una imagen para empezar a editar</span
          >
          <div
            id="cropOverlay"
            class="absolute border-2 border-dashed border-white pointer-events-none hidden"
          ></div>
        </div>
        <div class="ad-banner ad-banner-bottom">
          Espacio para Anuncio (Banner Inferior)
        </div>
      </div>

      <div class="editor-right-sidebar">
        <div class="sidebar-tool-group">
          <span class="sidebar-tool-group-label">Historial</span>
          <div class="sidebar-tool-group-row">
            <button id="undoBtn" class="tool-btn w-full disabled-btn" disabled>
              ‚Ü©Ô∏è Deshacer
            </button>
            <button id="redoBtn" class="tool-btn w-full disabled-btn" disabled>
              ‚Ü™Ô∏è Rehacer
            </button>
          </div>
        </div>

        <div class="sidebar-tool-group">
          <span class="sidebar-tool-group-label">Descargas</span>
          <p
            id="downloadCounter"
            class="text-gray-400 text-sm w-full text-center"
          >
            Descargas gratuitas restantes: --
          </p>
          <button
            id="watchAdButton"
            class="hidden bg-blue-700 hover:bg-blue-800 text-white font-bold py-1.5 px-3 rounded-lg shadow-md transition duration-200 text-sm w-full"
          >
            Ver Anuncio para +3 Descargas
          </button>
        </div>
        <div id="messageArea" class="message hidden"></div>
        <div id="loadingSpinner" class="loading-spinner mx-auto"></div>
      </div>
    </div>

    <div id="subscriptionModal" class="subscription-modal">
      <div class="subscription-modal-content">
        <h3 class="text-2xl font-bold mb-4">¬°√önete a nuestra comunidad!</h3>
        <p class="mb-4 text-gray-300">
          Suscr√≠bete a nuestro bolet√≠n para recibir las √∫ltimas novedades y
          trucos de edici√≥n de im√°genes.
        </p>
        <input
          type="email"
          id="emailInput"
          placeholder="Tu correo electr√≥nico"
          class="mb-4 p-3 rounded-lg border border-gray-600 bg-gray-700 text-white placeholder-gray-400"
        />
        <div class="flex justify-center space-x-4">
          <button
            id="subscribeButton"
            class="bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-2 px-5 rounded-lg transition duration-200"
          >
            Suscribirse
          </button>
          <button
            id="noThanksButton"
            class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-5 rounded-lg transition duration-200"
          >
            No, gracias
          </button>
        </div>
      </div>
    </div>

    <div id="cookieConsent" class="cookie-consent">
      <p class="text-sm">
        Este sitio utiliza cookies para mejorar tu experiencia. Al continuar,
        aceptas su uso.
      </p>
      <button
        id="acceptCookiesButton"
        class="bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-1 px-3 rounded-lg transition duration-200 text-sm"
      >
        Aceptar
      </button>
    </div>

    <div
      id="messageModal"
      class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[2000] opacity-0 invisible transition-all duration-300"
    >
      <div
        id="messageModalContent"
        class="p-8 rounded-xl shadow-2xl max-w-sm w-11/12 text-center relative"
      >
        <button
          id="messageModalCloseButton"
          class="absolute top-3 right-3 text-gray-400 hover:text-white text-2xl font-bold"
        >
          &times;
        </button>
        <p id="messageModalText" class="text-white text-lg font-semibold"></p>
        <div id="messageModalIcon" class="mt-4 text-4xl"></div>
      </div>
    </div>
  </body>

  <footer
    class="w-full bg-gray-900 text-gray-400 text-center py-4 mt-8 rounded-t-xl shadow-inner border-t border-gray-700 max-w-3xl"
  >
    <p class="text-sm">
      ¬© 2024 <span class="text-cyan-500 font-bold">ObelisIA</span>. Todos los
      derechos reservados.
    </p>
  </footer>
  <script src="js/script.js" defer></script>
</html>
